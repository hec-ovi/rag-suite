# === HOST PATHS ===
# Keep OLLAMA_MODELS_DIR absolute (persistent model cache outside repo).
# QDRANT_STORAGE_DIR and DATA_DIR can be relative to repository root.
OLLAMA_MODELS_DIR=/absolute/path/to/ollama-models
QDRANT_STORAGE_DIR=./qdrant/storage
DATA_DIR=./data

# === ROCm / GPU ===
HSA_OVERRIDE_GFX_VERSION=11.5.1
HIP_VISIBLE_DEVICES=0

# === OLLAMA ===
OLLAMA_CHAT_MODEL=gpt-oss:20b
OLLAMA_EMBEDDING_MODEL=bge-m3:latest
# Legacy variable name kept for compatibility with backend_rag config.
# Values now target the dedicated reranker backend (Hugging Face model ids or aliases).
OLLAMA_RERANK_MODEL=BAAI/bge-reranker-v2-m3
# Stability-first defaults for ROCm:
# keep one model loaded and one request at a time to reduce VRAM pressure/faults.
OLLAMA_KEEP_ALIVE=2m
OLLAMA_FLASH_ATTENTION=1
OLLAMA_KV_CACHE_TYPE=q8_0
OLLAMA_CONTEXT_LENGTH=8192
OLLAMA_NUM_PARALLEL=1
OLLAMA_MAX_LOADED_MODELS=1

# === BACKEND ===
QDRANT_COLLECTION_PREFIX=rag_suite_project
INFERENCE_TIMEOUT_SECONDS=300
OLLAMA_TIMEOUT_SECONDS=300
RERANKER_TIMEOUT_SECONDS=300
# Optional exposed ports for the three API services:
INGESTION_BACKEND_PORT=8000
INFERENCE_BACKEND_PORT=8010
RAG_BACKEND_PORT=8020
RERANKER_BACKEND_PORT=8030

# === DEDICATED RERANKER BACKEND ===
RERANK_DEFAULT_MODEL=BAAI/bge-reranker-v2-m3
RERANK_DEVICE=auto
RERANK_MAX_LENGTH=1024
RERANK_BATCH_SIZE=16
RERANK_USE_FP16=true
RERANKER_CACHE_DIR=./data/reranker_cache
RERANK_USE_ROCM_WHEELS=1
RERANK_TORCH_INDEX_URL=https://rocm.prereleases.amd.com/whl/gfx1151/

RAG_CHECKPOINT_PATH=./data/rag_memory_checkpoints.db
RAG_RERANKED_CHECKPOINT_PATH=./data/rag_reranked_memory_checkpoints.db
RAG_SESSIONS_DATABASE_URL=sqlite:///./data/rag_sessions.db
